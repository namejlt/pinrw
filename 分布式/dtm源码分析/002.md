## dtm svr服务

### http服务


#### 返回唯一事务id

/api/dtmsvr/newGid

通过uuid获取随机数，然后用57进制获取对应字符串，每次事务创建都需要获取一个ID

#### 事务准备

/api/dtmsvr/prepare

进行事务准备操作，保存全局事务和所有子事务，全局事务状态为已准备

数据冲突，检查状态是否为已准备，否则报错

具体准备操作由ap来发起，svr只处理后面的操作

#### 事务提交

/api/dtmsvr/submit

保存全局事务和所有子事务，全局事务状态为已提交

数据冲突，检查全局事务状态是否为已准备，是的话，更新状态为已提交；全局事务状态不是已提交返回报错

批量操作子事务提交


#### 事务中止

/api/dtmsvr/abort

检测全局事务，不符规则报错

更新状态为中止中

批量操作子事务中止

#### 注册分支

/api/dtmsvr/registerBranch

/api/dtmsvr/registerXaBranch

/api/dtmsvr/registerTccBranch


添加子事务，并更新状态已准备


#### 查询事务详情

/api/dtmsvr/query

返回全局事务和所有子事务

#### 查询事务列表

/api/dtmsvr/all

返回全局事务列表